query理解和处理，主要有query分词、query意图识别、query纠错、query改写，同时，也包括同义词挖掘、命名实体识别，紧密度分析
，以及时效性分析等，具体的可以参考下图
<img width="1080" height="451" alt="image" src="https://github.com/user-attachments/assets/98230521-15f1-4b65-999c-74c4e274a33c" />

**query分词**：query分词有细粒度和粗粒度，粗粒度主要考虑phrase，用来缓解语义飘逸，这样召回的doc的语义会尽量集中，但是这样召回的结果比较少，如果phrase又是比较低频的词条，可能出现召回的doc非常少的情况，所以业界一般是用细粒度的分词构建索引，并进行召回，粗粒度进行补充召回，同时，增加语义向量的召回结果进行补充，通过多路召回的方式来补充基于分词召回的不足

**词权重**：  
词权重主要用于基于基本的文本相关性，比如bm25，另外就是用于非比留的情况，有一些query中的不重要的词可以不用参与召回，避免召回不了目标结果或者相关结果，
参考文档

1、https://zhuanlan.zhihu.com/p/393914267
